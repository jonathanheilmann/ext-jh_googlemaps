{namespace jh = Heilmann\JhGooglemaps\ViewHelpers}

<f:layout name="Default" />

<f:section name="main">

<f:flashMessages renderMode="div" />

<table>
	<tbody>
		<f:for each="{locations}" as="location">
			<tr>
				<td>
					<a name="c{location.uid}"></a>
					<h2>{location.title}</h2>
					<f:if condition="{0: location} == {0: selectedLocation}">
						<f:then>
							<f:if condition="{location.address}">
								<p>
									<b>{location.address->f:format.nl2br()}</b>
									<br/>
									<a href="{jh:googleMapsLink(coordinates: location.latLng, description: location.title)}" target="new">
										<f:translate key="map.displayInGoogleMaps" />
									</a>
								</p>
							</f:if>
							<f:if condition="{location.teaser}">
								<p>
									<b>{location.teaser->f:format.nl2br()}</b>
								</p>
							</f:if>
							<f:if condition="{location.description}">
								{location.description->f:format.html()}
							</f:if>
							<f:link.action action="list">[weniger]</f:link.action>
						</f:then>
						<f:else>
							<f:if condition="{location.address}"><p>{location.address->f:format.nl2br()}</p></f:if>
							<f:if condition="{location.teaser}">
								<f:then>
									<p>{location.teaser->f:format.nl2br()}</p>
								</f:then>
								<f:else>
									<f:format.crop maxCharacters="30" append="...">{location.description->f:format.html()}</f:format.crop>
								</f:else>
							</f:if>
							<f:link.action action="list" arguments="{selectedLocation: location}" section="{location.uid}">[mehr]</f:link.action>
						</f:else>
					</f:if>
				</td>
			</tr>
		</f:for>
	</tbody>
</table>

</f:section>